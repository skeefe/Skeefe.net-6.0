!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/platform-browser-dynamic"),require("@angular/compiler")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/platform-browser-dynamic","@angular/compiler"],e):e((t.ng=t.ng||{},t.ng.upgrade=t.ng.upgrade||{}),t.ng.core,t.ng.platformBrowserDynamic,t.ng.compiler)}(this,function(t,e,n,r){"use strict";function o(){throw new Error("AngularJS v1.x is not loaded!")}function i(t){var e=T.resolve(t),n=e.selector;if(!n.match(R))throw new Error("Only selectors matching element names are supported, got: "+n);return n=n.replace(N,function(t,e){return e.toUpperCase()}),{type:t,selector:n,inputs:s(e.inputs),outputs:s(e.outputs)}}function s(t){var e=[];if(t)for(var n=0;n<t.length;n++){var r=t[n].split(":"),o=r[0].trim(),i=(r[1]||r[0]).trim(),s=i.charAt(0).toUpperCase()+i.substr(1);e.push({prop:o,attr:i,bracketAttr:"["+i+"]",parenAttr:"("+i+")",bracketParenAttr:"[("+i+")]",onAttr:"on"+s,bindAttr:"bind"+s,bindonAttr:"bindon"+s})}return e}function p(t){throw console.log(t,t.stack),t}function a(t){return"$"+t+"Controller"}function u(t,e){function n(n,r,o){var i=0;return{restrict:"E",require:j,link:{post:function(s,p,a,u,c){var h=r[t.selector];if(!h)throw new Error("Expecting ComponentFactory for: "+t.selector);null===u&&(u=n.get(g));var l=new I(e+i++,t,p,a,s,u,o,h);l.setupInputs(),l.bootstrapNg2(),l.projectContent(),l.setupOutputs(),l.registerCleanup()}}}}return n.$inject=[P,m,A],n}var c={bootstrap:o,module:o,element:o,version:o,resumeBootstrap:o,getTestability:o};try{window.hasOwnProperty("angular")&&(c=window.angular)}catch(t){}var h=c.bootstrap,l=c.module,f=c.element,d="ng2.Compiler",g="ng2.Injector",m="ng2.ComponentFactoryRefMap",v="ng2.NgZone",y="$controller",w="$scope",b="$rootScope",C="$compile",$="$httpBackend",P="$injector",A="$parse",O="$templateCache",k="$$testability",j="?^"+g,E={__UNINITIALIZED__:!0},I=function(){function t(t,e,n,r,o,i,s,p){this.id=t,this.info=e,this.element=n,this.attrs=r,this.scope=o,this.parentInjector=i,this.parse=s,this.componentFactory=p,this.component=null,this.inputChangeCount=0,this.inputChanges=null,this.componentRef=null,this.changeDetector=null,this.contentInsertionPoint=null,this.element[0].id=t,this.componentScope=o.$new(),this.childNodes=n.contents()}return t.prototype.bootstrapNg2=function(){var t=e.ReflectiveInjector.resolveAndCreate([{provide:w,useValue:this.componentScope}],this.parentInjector);this.contentInsertionPoint=document.createComment("ng1 insertion point"),this.componentRef=this.componentFactory.create(t,[[this.contentInsertionPoint]],this.element[0]),this.changeDetector=this.componentRef.changeDetectorRef,this.component=this.componentRef.instance},t.prototype.setupInputs=function(){for(var t=this,e=this.attrs,n=this.info.inputs,r=0;r<n.length;r++){var o=n[r],i=null;if(e.hasOwnProperty(o.attr)){var s=function(e){var n=E;return function(r){null!==t.inputChanges&&(t.inputChangeCount++,t.inputChanges[e]=new S(r,n===E?r:n),n=r),t.component[e]=r}}(o.prop);e.$observe(o.attr,s)}else e.hasOwnProperty(o.bindAttr)?i=e[o.bindAttr]:e.hasOwnProperty(o.bracketAttr)?i=e[o.bracketAttr]:e.hasOwnProperty(o.bindonAttr)?i=e[o.bindonAttr]:e.hasOwnProperty(o.bracketParenAttr)&&(i=e[o.bracketParenAttr]);if(null!=i){var p=function(e){return function(n,r){null!=t.inputChanges&&(t.inputChangeCount++,t.inputChanges[e]=new S(r,n)),t.component[e]=n}}(o.prop);this.componentScope.$watch(i,p)}}var a=this.info.type.prototype;a&&a.ngOnChanges&&(this.inputChanges={},this.componentScope.$watch(function(){return t.inputChangeCount},function(){var e=t.inputChanges;t.inputChanges={},t.component.ngOnChanges(e)})),this.componentScope.$watch(function(){return t.changeDetector&&t.changeDetector.detectChanges()})},t.prototype.projectContent=function(){var t=this.childNodes,e=this.contentInsertionPoint.parentNode;if(e)for(var n=0,r=t.length;n<r;n++)e.insertBefore(t[n],this.contentInsertionPoint)},t.prototype.setupOutputs=function(){for(var t=this,e=this.attrs,n=this.info.outputs,r=0;r<n.length;r++){var o=n[r],i=null,s=!1,p=o.bindonAttr?o.bindonAttr.substring(0,o.bindonAttr.length-6):null,a=o.bracketParenAttr?"[("+o.bracketParenAttr.substring(2,o.bracketParenAttr.length-8)+")]":null;if(e.hasOwnProperty(o.onAttr)?i=e[o.onAttr]:e.hasOwnProperty(o.parenAttr)?i=e[o.parenAttr]:e.hasOwnProperty(p)?(i=e[p],s=!0):e.hasOwnProperty(a)&&(i=e[a],s=!0),null!=i&&null!=s){var u=this.parse(i),c=u.assign;if(s&&!c)throw new Error("Expression '"+i+"' is not assignable!");var h=this.component[o.prop];if(!h)throw new Error("Missing emitter '"+o.prop+"' on component '"+this.info.selector+"'!");h.subscribe({next:s?function(e){return function(n){return e(t.scope,n)}}(c):function(e){return function(n){return e(t.scope,{$event:n})}}(u)})}}},t.prototype.registerCleanup=function(){var t=this;this.element.bind("$destroy",function(){t.componentScope.$destroy(),t.componentRef.destroy()})},t}(),S=function(){function t(t,e){this.previousValue=t,this.currentValue=e}return t.prototype.isFirstChange=function(){return this.previousValue===this.currentValue},t}(),R=/^[\w|-]*$/,N=/-(\w)/g,T=new r.DirectiveResolver,D=/([A-Z])/g,_={__UNINITIALIZED__:!0},B="NOT_SUPPORTED",F=function(){function t(t){this.name=t,this.inputs=[],this.inputsRename=[],this.outputs=[],this.outputsRename=[],this.propertyOutputs=[],this.checkProperties=[],this.propertyMap={},this.linkFn=null,this.directive=null,this.$controller=null;var n=t.replace(D,function(t,e){return"-"+e.toLowerCase()}),r=this;this.type=e.Directive({selector:n,inputs:this.inputsRename,outputs:this.outputsRename}).Class({constructor:[new e.Inject(w),e.ElementRef,function(t,e){return new M(r.linkFn,t,r.directive,e,r.$controller,r.inputs,r.outputs,r.propertyOutputs,r.checkProperties,r.propertyMap)}],ngOnInit:function(){},ngOnChanges:function(){},ngDoCheck:function(){}})}return t.prototype.extractDirective=function(t){var e=t.get(this.name+"Directive");if(e.length>1)throw new Error("Only support single directive definition for: "+this.name);var n=e[0];n.replace&&this.notSupported("replace"),n.terminal&&this.notSupported("terminal");var r=n.link;return"object"==typeof r&&r.post&&this.notSupported("link.post"),n},t.prototype.notSupported=function(t){throw new Error("Upgraded directive '"+this.name+"' does not support '"+t+"'.")},t.prototype.extractBindings=function(){var t="object"==typeof this.directive.bindToController;if(t&&Object.keys(this.directive.scope).length)throw new Error("Binding definitions on scope and controller at the same time are not supported.");var e=t?this.directive.bindToController:this.directive.scope;if("object"==typeof e)for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],o=r.charAt(0);r=r.substr(1)||n;var i="output_"+n,s=i+": "+n,p=i+": "+n+"Change",a="input_"+n,u=a+": "+n;switch(o){case"=":this.propertyOutputs.push(i),this.checkProperties.push(r),this.outputs.push(i),this.outputsRename.push(p),this.propertyMap[i]=r,this.inputs.push(a),this.inputsRename.push(u),this.propertyMap[a]=r;break;case"@":case"<":this.inputs.push(a),this.inputsRename.push(u),this.propertyMap[a]=r;break;case"&":this.outputs.push(i),this.outputsRename.push(s),this.propertyMap[i]=r;break;default:var c=JSON.stringify(e);throw new Error("Unexpected mapping '"+o+"' in '"+c+"' in '"+this.name+"' directive.")}}},t.prototype.compileTemplate=function(t,e,n){function r(e){var n=document.createElement("div");return n.innerHTML=e,t(n.childNodes)}var o=this;if(void 0!==this.directive.template)this.linkFn=r("function"==typeof this.directive.template?this.directive.template():this.directive.template);else{if(!this.directive.templateUrl)throw new Error("Directive '"+this.name+"' is not a component, it is missing template.");var i="function"==typeof this.directive.templateUrl?this.directive.templateUrl():this.directive.templateUrl,s=e.get(i);if(void 0===s)return new Promise(function(t,s){n("GET",i,null,function(n,p){200==n?t(o.linkFn=r(e.put(i,p))):s("GET "+i+" returned "+n+": "+p)})});this.linkFn=r(s)}return null},t.resolve=function(t,e){var n=[],r=e.get(C),o=e.get(O),i=e.get($),s=e.get(y);for(var p in t)if(t.hasOwnProperty(p)){var a=t[p];a.directive=a.extractDirective(e),a.$controller=s,a.extractBindings();var u=a.compileTemplate(r,o,i);u&&n.push(u)}return Promise.all(n)},t}(),M=function(){function t(t,n,r,o,i,s,p,a,u,c){this.linkFn=t,this.directive=r,this.$controller=i,this.inputs=s,this.outputs=p,this.propOuts=a,this.checkProperties=u,this.propertyMap=c,this.destinationObj=null,this.checkLastValues=[],this.$element=null,this.element=o.nativeElement,this.componentScope=n.$new(!!r.scope),this.$element=f(this.element);var h=r.controller;r.bindToController&&h?this.destinationObj=this.buildController(h):this.destinationObj=this.componentScope;for(var l=0;l<s.length;l++)this[s[l]]=null;for(var d=0;d<p.length;d++){var g=this[p[d]]=new e.EventEmitter;this.setComponentProperty(p[d],function(t){return function(e){return t.emit(e)}}(g))}for(var m=0;m<a.length;m++)this[a[m]]=new e.EventEmitter,this.checkLastValues.push(_)}return t.prototype.ngOnInit=function(){var t=this;!this.directive.bindToController&&this.directive.controller&&this.buildController(this.directive.controller);var e=this.directive.link;if("object"==typeof e&&(e=e.pre),e){var n=B,r=B,o=this.resolveRequired(this.$element,this.directive.require);this.directive.link(this.componentScope,this.$element,n,o,r)}for(var i,s=[];i=this.element.firstChild;)this.element.removeChild(i),s.push(i);this.linkFn(this.componentScope,function(e,n){for(var r=0,o=e.length;r<o;r++)t.element.appendChild(e[r])},{parentBoundTranscludeFn:function(t,e){e(s)}}),this.destinationObj.$onInit&&this.destinationObj.$onInit()},t.prototype.ngOnChanges=function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];this.setComponentProperty(e,n.currentValue)}},t.prototype.ngDoCheck=function(){for(var t=0,e=this.destinationObj,n=this.checkLastValues,r=this.checkProperties,o=0;o<r.length;o++){var i=e[r[o]],s=n[o];if(i!==s)if("number"==typeof i&&isNaN(i)&&"number"==typeof s&&isNaN(s));else{var p=this[this.propOuts[o]];p.emit(n[o]=i)}}return t},t.prototype.setComponentProperty=function(t,e){this.destinationObj[this.propertyMap[t]]=e},t.prototype.buildController=function(t){var e={$scope:this.componentScope,$element:this.$element},n=this.$controller(t,e,null,this.directive.controllerAs);return this.$element.data(a(this.directive.name),n),n},t.prototype.resolveRequired=function(t,e){if(e){if("string"==typeof e){var n=e,r=!1,o=!1,i=!1;"?"==n.charAt(0)&&(r=!0,n=n.substr(1)),"^"==n.charAt(0)&&(i=!0,n=n.substr(1)),"^"==n.charAt(0)&&(o=!0,n=n.substr(1));var s=a(n);o&&(t=t.parent());var p=i?t.inheritedData(s):t.data(s);if(!p&&!r)throw new Error("Can not locate '"+e+"' in '"+this.directive.name+"'.");return p}if(e instanceof Array){for(var u=[],c=0;c<e.length;c++)u.push(this.resolveRequired(t,e[c]));return u}throw new Error("Directive '"+this.directive.name+"' require syntax unrecognized: "+this.directive.require)}},t}(),U=0,x=function(){function t(t){if(this.ng2AppModule=t,this.idPrefix="NG2_UPGRADE_"+U++ +"_",this.upgradedComponents=[],this.ng1ComponentsToBeUpgraded={},this.providers=[],!t)throw new Error("UpgradeAdapter cannot be instantiated without an NgModule of the Angular 2 app.")}return t.prototype.downgradeNg2Component=function(t){this.upgradedComponents.push(t);var e=i(t);return u(e,""+this.idPrefix+e.selector+"_c")},t.prototype.upgradeNg1Component=function(t){return this.ng1ComponentsToBeUpgraded.hasOwnProperty(t)?this.ng1ComponentsToBeUpgraded[t].type:(this.ng1ComponentsToBeUpgraded[t]=new F(t)).type},t.prototype.bootstrap=function(t,r,o){var s,u,c,y,w,$=this,A=new e.NgZone({enableLongStackTrace:Zone.hasOwnProperty("longStackTraceZoneSpec")}),O=new q,j=null,E=null,I=[],S={},R=l(this.idPrefix,r);R.factory(g,function(){return E.injector.get(e.Injector)}).value(v,A).factory(d,function(){return E.injector.get(e.Compiler)}).value(m,S).config(["$provide","$injector",function(t,n){t.decorator(b,["$delegate",function(t){if(u=t.constructor.prototype,!u.hasOwnProperty("$apply"))throw new Error("Failed to find '$apply' on '$rootScope'!");return s=u.$apply,u.$apply=function(t){return I.push(t)},c=t}]),n.has(k)&&t.decorator(k,["$delegate",function(t){var n=this,r=t.whenStable,o=function(t){var i=n;r.call(n,function(){var n=E.injector.get(e.Testability);n.isStable()?t.apply(this,arguments):n.whenStable(o.bind(i,t))})};return t.whenStable=o,t}])}]),w=new Promise(function(r,o){R.run(["$injector","$rootScope",function(s,p){j=s,F.resolve($.ng1ComponentsToBeUpgraded,s).then(function(){var s=e.NgModule({providers:[{provide:P,useFactory:function(){return j}},{provide:C,useFactory:function(){return j.get(C)}},$.providers],imports:[$.ng2AppModule]}).Class({constructor:function(){},ngDoBootstrap:function(){}});n.platformBrowserDynamic()._bootstrapModuleWithZone(s,void 0,A,function(t){t.forEach(function(t){S[i(t.componentType).selector]=t})}).then(function(e){E=e,f(t).data(a(g),E.injector),A.onMicrotaskEmpty.subscribe({next:function(t){return A.runOutsideAngular(function(){return p.$evalAsync()})}})}).then(r,o)})}])});var N=window.angular;return N.resumeBootstrap=void 0,A.run(function(){h(t,[$.idPrefix],o)}),y=new Promise(function(t){if(N.resumeBootstrap){var e=N.resumeBootstrap;N.resumeBootstrap=function(){N.resumeBootstrap=e,N.resumeBootstrap.apply(this,arguments),t()}}else t()}),Promise.all([y,w]).then(function(){E.injector.get(e.NgZone).run(function(){if(u){for(u.$apply=s;I.length;)c.$apply(I.shift());O._bootstrapDone(E,j),u=null}})},p),O},t.prototype.upgradeNg1Provider=function(t,e){var n=e&&e.asToken||t;this.providers.push({provide:n,useFactory:function(e){return e.get(t)},deps:[P]})},t.prototype.downgradeNg2Provider=function(t){var e=function(e){return e.get(t)};return e.$inject=[g],e},t}(),q=function(){function t(){this._readyFn=null,this.ng1RootScope=null,this.ng1Injector=null,this.ng2ModuleRef=null,this.ng2Injector=null}return t.prototype._bootstrapDone=function(t,e){this.ng2ModuleRef=t,this.ng2Injector=t.injector,this.ng1Injector=e,this.ng1RootScope=e.get(b),this._readyFn&&this._readyFn(this)},t.prototype.ready=function(t){this._readyFn=t},t.prototype.dispose=function(){this.ng1Injector.get(b).$destroy(),this.ng2ModuleRef.destroy()},t}();t.UpgradeAdapter=x,t.UpgradeAdapterRef=q});