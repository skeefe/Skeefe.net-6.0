!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core"],t):t((e.ng=e.ng||{},e.ng.core=e.ng.core||{},e.ng.core.testing=e.ng.core.testing||{}),e.ng.core)}(this,function(e,t){"use strict";function n(e){return w.jasmine?function(t){t||(t=function(){},t.fail=function(e){throw e}),r(e,t,function(e){return"string"==typeof e?t.fail(new Error(e)):void t.fail(e)})}:function(){return new Promise(function(t,n){r(e,t,n)})}}function r(e,t,n){var r=Zone.current,i=Zone.AsyncTestZoneSpec;if(void 0===i)throw new Error("AsyncTestZoneSpec is needed for the async() test helper but could not be found. Please make sure that your environment includes zone.js/dist/async-test.js");var o=Zone.ProxyZoneSpec;if(void 0===o)throw new Error("ProxyZoneSpec is needed for the async() test helper but could not be found. Please make sure that your environment includes zone.js/dist/proxy.js");var s=o.get();o.assertPresent();var u=Zone.current.getZoneWith("ProxyZoneSpec"),c=s.getDelegate();return u.parent.run(function(){var e=new i(function(){r.run(function(){s.getDelegate()==e&&s.setDelegate(c),t()})},function(t){r.run(function(){s.getDelegate()==e&&s.setDelegate(c),n(t)})},"test");s.setDelegate(e)}),Zone.current.runGuarded(e)}function i(e){Zone.current.scheduleMicroTask("scheduleMicrotask",e)}function o(e){return void 0!==e&&null!==e}function s(e){return void 0===e||null===e}function u(e){return Array.isArray(e)}function c(e){if("string"==typeof e)return e;if(void 0===e||null===e)return""+e;if(e.overriddenName)return e.overriddenName;if(e.name)return e.name;var t=e.toString(),n=t.indexOf("\n");return n===-1?t:t.substring(0,n)}function a(){M=null,T.assertPresent().resetDelegate()}function l(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var r=T.assertPresent();if(N)throw new Error("fakeAsync() calls can not be nested");N=!0;try{if(!M){if(r.getDelegate()instanceof O)throw new Error("fakeAsync() calls can not be nested");M=new O}var i=void 0,o=r.getDelegate();r.setDelegate(M);try{i=e.apply(void 0,t),d()}finally{r.setDelegate(o)}if(M.pendingPeriodicTimers.length>0)throw new Error(M.pendingPeriodicTimers.length+" periodic timer(s) still in the queue.");if(M.pendingTimers.length>0)throw new Error(M.pendingTimers.length+" timer(s) still in the queue.");return i}finally{N=!1,a()}}}function f(){if(null==M)throw new Error("The code should be running in the fakeAsync zone to call this function");return M}function p(e){void 0===e&&(e=0),f().tick(e)}function h(){var e=f();e.pendingPeriodicTimers,e.pendingPeriodicTimers.length=0}function d(){f().flushMicrotasks()}function m(e,t){if(o(e))for(var n=0;n<e.length;n++){var r=e[n];u(r)?m(r,t):t.push(r)}return t}function v(){throw new Error("unimplemented")}function _(){return null==G&&(G=new B),G}function g(e,t){var n=_();return e.indexOf(x)>=0?function(){return n.compileComponents().then(function(){var r=n.get(x);return n.execute(e,t),r.promise})}:function(){return n.execute(e,t)}}function y(e,t){return void 0===t&&(t=null),t?function(){var n=_();return e&&n.configureTestingModule(e),t()}:new H(function(){return e})}var b,w="undefined"==typeof window?global:window;b="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:global:window;var E=b;E.assert=function(e){};var S=(function(){function e(){}return e.toFixed=function(e,t){return e.toFixed(t)},e.equal=function(e,t){return e===t},e.parseIntAutoRadix=function(e){var t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t},e.parseInt=function(e,t){if(10==t){if(/^(\-|\+)?[0-9]+$/.test(e))return parseInt(e,t)}else if(16==t){if(/^(\-|\+)?[0-9ABCDEFabcdef]+$/.test(e))return parseInt(e,t)}else{var n=parseInt(e,t);if(!isNaN(n))return n}throw new Error("Invalid integer literal when parsing "+e+" in base "+t)},Object.defineProperty(e,"NaN",{get:function(){return NaN},enumerable:!0,configurable:!0}),e.isNumeric=function(e){return!isNaN(e-parseFloat(e))},e.isNaN=function(e){return isNaN(e)},e.isInteger=function(e){return Number.isInteger(e)},e}(),function(){function e(){}return e.apply=function(e,t){return e.apply(null,t)},e.bind=function(e,t){return e.bind(t)},e}()),C=function(){function e(e,n,r){var o=this;this.componentRef=e,this.ngZone=n,this._autoDetect=r,this._isStable=!0,this._isDestroyed=!1,this._promise=null,this._onUnstableSubscription=null,this._onStableSubscription=null,this._onMicrotaskEmptySubscription=null,this._onErrorSubscription=null,this.changeDetectorRef=e.changeDetectorRef,this.elementRef=e.location,this.debugElement=t.getDebugNode(this.elementRef.nativeElement),this.componentInstance=e.instance,this.nativeElement=this.elementRef.nativeElement,this.componentRef=e,this.ngZone=n,null!=n&&(this._onUnstableSubscription=n.onUnstable.subscribe({next:function(){o._isStable=!1}}),this._onMicrotaskEmptySubscription=n.onMicrotaskEmpty.subscribe({next:function(){o._autoDetect&&o.detectChanges(!0)}}),this._onStableSubscription=n.onStable.subscribe({next:function(){o._isStable=!0,null!==o._promise&&i(function(){o.ngZone.hasPendingMacrotasks||null!==o._promise&&(o._resolve(!0),o._resolve=null,o._promise=null)})}}),this._onErrorSubscription=n.onError.subscribe({next:function(e){throw e}}))}return e.prototype._tick=function(e){this.changeDetectorRef.detectChanges(),e&&this.checkNoChanges()},e.prototype.detectChanges=function(e){var t=this;void 0===e&&(e=!0),null!=this.ngZone?this.ngZone.run(function(){t._tick(e)}):this._tick(e)},e.prototype.checkNoChanges=function(){this.changeDetectorRef.checkNoChanges()},e.prototype.autoDetectChanges=function(e){if(void 0===e&&(e=!0),null==this.ngZone)throw new Error("Cannot call autoDetectChanges when ComponentFixtureNoNgZone is set");this._autoDetect=e,this.detectChanges()},e.prototype.isStable=function(){return this._isStable&&!this.ngZone.hasPendingMacrotasks},e.prototype.whenStable=function(){var e=this;return this.isStable()?Promise.resolve(!1):null!==this._promise?this._promise:(this._promise=new Promise(function(t){e._resolve=t}),this._promise)},e.prototype.destroy=function(){this._isDestroyed||(this.componentRef.destroy(),null!=this._onUnstableSubscription&&(this._onUnstableSubscription.unsubscribe(),this._onUnstableSubscription=null),null!=this._onStableSubscription&&(this._onStableSubscription.unsubscribe(),this._onStableSubscription=null),null!=this._onMicrotaskEmptySubscription&&(this._onMicrotaskEmptySubscription.unsubscribe(),this._onMicrotaskEmptySubscription=null),null!=this._onErrorSubscription&&(this._onErrorSubscription.unsubscribe(),this._onErrorSubscription=null),this._isDestroyed=!0)},e}(),O=Zone.FakeAsyncTestZoneSpec,T=Zone.ProxyZoneSpec,M=null,N=!1,x=function(){function e(){var e=this;this._promise=new Promise(function(t,n){e._resolve=t,e._reject=n})}return e.prototype.done=function(e){this._resolve(e)},e.prototype.fail=function(e,t){this._reject(e)},Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!0,configurable:!0}),e}(),k=E.Map,D=E.Set,F=(function(){try{if(1===new k([[1,2]]).size)return function(e){return new k(e)}}catch(e){}return function(e){for(var t=new k,n=0;n<e.length;n++){var r=e[n];t.set(r[0],r[1])}return t}}(),function(){try{if(new k(new k))return function(e){return new k(e)}}catch(e){}return function(e){var t=new k;return e.forEach(function(e,n){t.set(n,e)}),t}}(),function(){return(new k).keys().next?function(e){for(var t,n=e.keys();!(t=n.next()).done;)e.set(t.value,null)}:function(e){e.forEach(function(t,n){e.set(n,null)})}}(),function(){try{if((new k).values().next)return function(e,t){return t?Array.from(e.values()):Array.from(e.keys())}}catch(e){}return function(e,t){var n=F.createFixedSize(e.size),r=0;return e.forEach(function(e,i){n[r]=t?e:i,r++}),n}}(),function(){function e(){}return e.createFixedSize=function(e){return new Array(e)},e.createGrowableSize=function(e){return new Array(e)},e.clone=function(e){return e.slice(0)},e.forEachWithIndex=function(e,t){for(var n=0;n<e.length;n++)t(e[n],n)},e.first=function(e){return e?e[0]:null},e.last=function(e){return e&&0!=e.length?e[e.length-1]:null},e.indexOf=function(e,t,n){return void 0===n&&(n=0),e.indexOf(t,n)},e.contains=function(e,t){return e.indexOf(t)!==-1},e.reversed=function(t){var n=e.clone(t);return n.reverse()},e.concat=function(e,t){return e.concat(t)},e.insert=function(e,t,n){e.splice(t,0,n)},e.removeAt=function(e,t){var n=e[t];return e.splice(t,1),n},e.removeAll=function(e,t){for(var n=0;n<t.length;++n){var r=e.indexOf(t[n]);e.splice(r,1)}},e.remove=function(e,t){var n=e.indexOf(t);return n>-1&&(e.splice(n,1),!0)},e.clear=function(e){e.length=0},e.isEmpty=function(e){return 0==e.length},e.fill=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=null),e.fill(t,n,null===r?e.length:r)},e.equals=function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0},e.slice=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=null),e.slice(t,null===n?void 0:n)},e.splice=function(e,t,n){return e.splice(t,n)},e.sort=function(e,t){o(t)?e.sort(t):e.sort()},e.toString=function(e){return e.toString()},e.toJSON=function(e){return JSON.stringify(e)},e.maximum=function(e,t){if(0==e.length)return null;for(var n=null,r=-(1/0),i=0;i<e.length;i++){var o=e[i];if(!s(o)){var u=t(o);u>r&&(n=o,r=u)}}return n},e.flatten=function(e){var t=[];return m(e,t),t},e.addAll=function(e,t){for(var n=0;n<t.length;n++)e.push(t[n])},e}()),P=(function(){var e=new D([1,2,3]);return 3===e.size?function(e){return new D(e)}:function(e){var t=new D(e);if(t.size!==e.length)for(var n=0;n<e.length;n++)t.add(e[n]);return t}}(),this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),A=function(e){function t(t){var n=e.call(this,t);this._nativeError=n}return P(t,e),Object.defineProperty(t.prototype,"message",{get:function(){return this._nativeError.message},set:function(e){this._nativeError.message=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._nativeError.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stack",{get:function(){return this._nativeError.stack},set:function(e){this._nativeError.stack=e},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this._nativeError.toString()},t}(Error),j=(function(e){function t(t,n){e.call(this,t+" caused by: "+(n instanceof Error?n.message:n)),this.originalError=n}return P(t,e),Object.defineProperty(t.prototype,"stack",{get:function(){return(this.originalError instanceof Error?this.originalError:this._nativeError).stack},enumerable:!0,configurable:!0}),t}(A),this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),I=function(e){function t(){e.apply(this,arguments)}return j(t,e),Object.defineProperty(t.prototype,"injector",{get:function(){throw v()},enumerable:!0,configurable:!0}),t.prototype.overrideModule=function(e,t){throw v()},t.prototype.overrideDirective=function(e,t){throw v()},t.prototype.overrideComponent=function(e,t){throw v()},t.prototype.overridePipe=function(e,t){throw v()},t}(t.Compiler),Z=function(){function e(){}return e}(),R=new Object,W=function(){function e(){}return e.prototype.insertRootElement=function(e){},e}(),z=0,U=new t.OpaqueToken("ComponentFixtureAutoDetect"),q=new t.OpaqueToken("ComponentFixtureNoNgZone"),B=function(){function e(){this._instantiated=!1,this._compiler=null,this._moduleRef=null,this._moduleWithComponentFactories=null,this._compilerOptions=[],this._moduleOverrides=[],this._componentOverrides=[],this._directiveOverrides=[],this._pipeOverrides=[],this._providers=[],this._declarations=[],this._imports=[],this._schemas=[],this._activeFixtures=[],this.platform=null,this.ngModule=null}return e.initTestEnvironment=function(e,t){var n=_();return _().initTestEnvironment(e,t),n},e.resetTestEnvironment=function(){_().resetTestEnvironment()},e.resetTestingModule=function(){return _().resetTestingModule(),e},e.configureCompiler=function(t){return _().configureCompiler(t),e},e.configureTestingModule=function(t){return _().configureTestingModule(t),e},e.compileComponents=function(){return _().compileComponents()},e.overrideModule=function(t,n){return _().overrideModule(t,n),e},e.overrideComponent=function(t,n){return _().overrideComponent(t,n),e},e.overrideDirective=function(t,n){return _().overrideDirective(t,n),e},e.overridePipe=function(t,n){return _().overridePipe(t,n),e},e.get=function(e,n){return void 0===n&&(n=t.Injector.THROW_IF_NOT_FOUND),_().get(e,n)},e.createComponent=function(e){return _().createComponent(e)},e.prototype.initTestEnvironment=function(e,t){if(this.platform||this.ngModule)throw new Error("Cannot set base providers because it has already been called");this.platform=t,this.ngModule=e},e.prototype.resetTestEnvironment=function(){this.resetTestingModule(),this.platform=null,this.ngModule=null},e.prototype.resetTestingModule=function(){this._compiler=null,this._moduleOverrides=[],this._componentOverrides=[],this._directiveOverrides=[],this._pipeOverrides=[],this._moduleRef=null,this._moduleWithComponentFactories=null,this._compilerOptions=[],this._providers=[],this._declarations=[],this._imports=[],this._schemas=[],this._instantiated=!1,this._activeFixtures.forEach(function(e){return e.destroy()}),this._activeFixtures=[]},e.prototype.configureCompiler=function(e){this._assertNotInstantiated("TestBed.configureCompiler","configure the compiler"),this._compilerOptions.push(e)},e.prototype.configureTestingModule=function(e){this._assertNotInstantiated("TestBed.configureTestingModule","configure the test module"),e.providers&&(this._providers=F.concat(this._providers,e.providers)),e.declarations&&(this._declarations=F.concat(this._declarations,e.declarations)),e.imports&&(this._imports=F.concat(this._imports,e.imports)),e.schemas&&(this._schemas=F.concat(this._schemas,e.schemas))},e.prototype.compileComponents=function(){var e=this;if(this._moduleWithComponentFactories||this._instantiated)return Promise.resolve(null);var t=this._createCompilerAndModule();return this._compiler.compileModuleAndAllComponentsAsync(t).then(function(t){e._moduleWithComponentFactories=t})},e.prototype._initIfNeeded=function(){if(!this._instantiated){if(!this._moduleWithComponentFactories)try{var e=this._createCompilerAndModule();this._moduleWithComponentFactories=this._compiler.compileModuleAndAllComponentsSync(e)}catch(e){throw e.compType?new Error("This test module uses the component "+c(e.compType)+' which is using a "templateUrl", but they were never compiled. Please call "TestBed.compileComponents" before your test.'):e}this._moduleRef=this._moduleWithComponentFactories.ngModuleFactory.create(this.platform.injector),this._instantiated=!0}},e.prototype._createCompilerAndModule=function(){var n=this,r=this._providers.concat([{provide:e,useValue:this}]),i=this._declarations,o=[this.ngModule,this._imports],s=this._schemas,u=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{providers:r,declarations:i,imports:o,schemas:s}]}],e.ctorParameters=[],e}(),c=this.platform.injector.get(Z);return this._compiler=c.createTestingCompiler(this._compilerOptions.concat([{useDebug:!0}])),this._moduleOverrides.forEach(function(e){return n._compiler.overrideModule(e[0],e[1])}),this._componentOverrides.forEach(function(e){return n._compiler.overrideComponent(e[0],e[1])}),this._directiveOverrides.forEach(function(e){return n._compiler.overrideDirective(e[0],e[1])}),this._pipeOverrides.forEach(function(e){return n._compiler.overridePipe(e[0],e[1])}),u},e.prototype._assertNotInstantiated=function(e,t){if(this._instantiated)throw new Error("Cannot "+t+" when the test module has already been instantiated. "+("Make sure you are not using `inject` before `"+e+"`."))},e.prototype.get=function(n,r){if(void 0===r&&(r=t.Injector.THROW_IF_NOT_FOUND),this._initIfNeeded(),n===e)return this;var i=this._moduleRef.injector.get(n,R);return i===R?this._compiler.injector.get(n,r):i},e.prototype.execute=function(e,t){var n=this;this._initIfNeeded();var r=e.map(function(e){return n.get(e)});return S.apply(t,r)},e.prototype.overrideModule=function(e,t){this._assertNotInstantiated("overrideModule","override module metadata"),this._moduleOverrides.push([e,t])},e.prototype.overrideComponent=function(e,t){this._assertNotInstantiated("overrideComponent","override component metadata"),this._componentOverrides.push([e,t])},e.prototype.overrideDirective=function(e,t){this._assertNotInstantiated("overrideDirective","override directive metadata"),this._directiveOverrides.push([e,t])},e.prototype.overridePipe=function(e,t){this._assertNotInstantiated("overridePipe","override pipe metadata"),this._pipeOverrides.push([e,t])},e.prototype.createComponent=function(e){var n=this;this._initIfNeeded();var r=this._moduleWithComponentFactories.componentFactories.find(function(t){return t.componentType===e});if(!r)throw new Error("Cannot create the component "+c(e)+" as it was not imported into the testing module!");var i=this.get(q,!1),o=this.get(U,!1),s=i?null:this.get(t.NgZone,null),u=this.get(W),a="root"+z++;u.insertRootElement(a);var l=function(){var e=r.create(n,[],"#"+a);return new C(e,s,o)},f=null==s?l():s.run(l);return this._activeFixtures.push(f),f},e}(),G=null,H=function(){function e(e){this._moduleDef=e}return e.prototype._addModule=function(){var e=this._moduleDef();e&&_().configureTestingModule(e)},e.prototype.inject=function(e,t){var n=this;return function(){return n._addModule(),g(e,t)()}},e}(),J="undefined"==typeof window?global:window;J.beforeEach&&J.beforeEach(function(){B.resetTestingModule(),a()});var $="",V=function(){function e(){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._destroyed=!1,this._started=!1,this.parentPlayer=null,this.log=[]}return e.prototype._onFinish=function(){this._finished||(this._finished=!0,this.log.push("finish"),this._onDoneFns.forEach(function(e){return e()}),this._onDoneFns=[],o(this.parentPlayer)||this.destroy())},e.prototype.init=function(){this.log.push("init")},e.prototype.onDone=function(e){this._onDoneFns.push(e)},e.prototype.onStart=function(e){this._onStartFns.push(e)},e.prototype.hasStarted=function(){return this._started},e.prototype.play=function(){this.hasStarted()||(this._onStartFns.forEach(function(e){return e()}),this._onStartFns=[],this._started=!0),this.log.push("play")},e.prototype.pause=function(){this.log.push("pause")},e.prototype.restart=function(){this.log.push("restart")},e.prototype.finish=function(){this._onFinish()},e.prototype.reset=function(){this.log.push("reset")},e.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.finish(),this.log.push("destroy"))},e.prototype.setPosition=function(e){},e.prototype.getPosition=function(){return 0},e}(),K={TestingCompiler:I,TestingCompilerFactory:Z,MockAnimationPlayer:V};e.async=n,e.ComponentFixture=C,e.resetFakeAsyncZone=a,e.fakeAsync=l,e.tick=p,e.discardPeriodicTasks=h,e.flushMicrotasks=d,e.TestComponentRenderer=W,e.ComponentFixtureAutoDetect=U,e.ComponentFixtureNoNgZone=q,e.TestBed=B,e.getTestBed=_,e.inject=g,e.InjectSetupWrapper=H,e.withModule=y,e.__core_private_testing_placeholder__=$,e.__core_private_testing__=K});