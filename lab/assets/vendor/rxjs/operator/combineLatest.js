"use strict";function combineLatest(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r=null;return"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&isArray_1.isArray(t[0])&&(t=t[0]),t.unshift(this),new ArrayObservable_1.ArrayObservable(t).lift(new CombineLatestOperator(r))}var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},ArrayObservable_1=require("../observable/ArrayObservable"),isArray_1=require("../util/isArray"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult"),none={};exports.combineLatest=combineLatest;var CombineLatestOperator=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e._subscribe(new CombineLatestSubscriber(t,this.project))},t}();exports.CombineLatestOperator=CombineLatestOperator;var CombineLatestSubscriber=function(t){function e(e,r){t.call(this,e),this.project=r,this.active=0,this.values=[],this.observables=[]}return __extends(e,t),e.prototype._next=function(t){this.values.push(none),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var r=0;r<e;r++){var s=t[r];this.add(subscribeToResult_1.subscribeToResult(this,s,s,r))}}},e.prototype.notifyComplete=function(t){0===(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,s,i){var o=this.values,n=o[r],a=this.toRespond?n===none?--this.toRespond:this.toRespond:0;o[r]=e,0===a&&(this.project?this._tryProject(o):this.destination.next(o.slice()))},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(OuterSubscriber_1.OuterSubscriber);exports.CombineLatestSubscriber=CombineLatestSubscriber;