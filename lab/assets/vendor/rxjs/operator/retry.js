"use strict";function retry(t){return void 0===t&&(t=-1),this.lift(new RetryOperator(t,this))}var __extends=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},Subscriber_1=require("../Subscriber");exports.retry=retry;var RetryOperator=function(){function t(t,r){this.count=t,this.source=r}return t.prototype.call=function(t,r){return r._subscribe(new RetrySubscriber(t,this.count,this.source))},t}(),RetrySubscriber=function(t){function r(r,e,i){t.call(this,r),this.count=e,this.source=i}return __extends(r,t),r.prototype.error=function(r){if(!this.isStopped){var e=this,i=e.source,s=e.count;if(0===s)return t.prototype.error.call(this,r);s>-1&&(this.count=s-1),this.unsubscribe(),this.isStopped=!1,this.closed=!1,i.subscribe(this)}},r}(Subscriber_1.Subscriber);