"use strict";function cache(e,r,u){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY);var n,c,b=this,t=0,i=function(){return n=new ReplaySubject_1.ReplaySubject(e,r,u)};return new Observable_1.Observable(function(e){n||(n=i(),c=b.subscribe(function(e){return n.next(e)},function(e){var r=n;n=null,r.error(e)},function(){return n.complete()})),t++,n||(n=i());var r=n.subscribe(e);return function(){t--,r&&r.unsubscribe(),0===t&&c.unsubscribe()}})}var Observable_1=require("../Observable"),ReplaySubject_1=require("../ReplaySubject");exports.cache=cache;