"use strict";function race(){for(var r=[],t=0;t<arguments.length;t++)r[t-0]=arguments[t];return 1===r.length&&isArray_1.isArray(r[0])&&(r=r[0]),r.unshift(this),raceStatic.apply(this,r)}function raceStatic(){for(var r=[],t=0;t<arguments.length;t++)r[t-0]=arguments[t];if(1===r.length){if(!isArray_1.isArray(r[0]))return r[0];r=r[0]}return new ArrayObservable_1.ArrayObservable(r).lift(new RaceOperator)}var __extends=this&&this.__extends||function(r,t){function e(){this.constructor=r}for(var s in t)t.hasOwnProperty(s)&&(r[s]=t[s]);r.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)},isArray_1=require("../util/isArray"),ArrayObservable_1=require("../observable/ArrayObservable"),OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.race=race,exports.raceStatic=raceStatic;var RaceOperator=function(){function r(){}return r.prototype.call=function(r,t){return t._subscribe(new RaceSubscriber(r))},r}();exports.RaceOperator=RaceOperator;var RaceSubscriber=function(r){function t(t){r.call(this,t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}return __extends(t,r),t.prototype._next=function(r){this.observables.push(r)},t.prototype._complete=function(){var r=this.observables,t=r.length;if(0===t)this.destination.complete();else{for(var e=0;e<t;e++){var s=r[e],i=subscribeToResult_1.subscribeToResult(this,s,s,e);this.subscriptions&&(this.subscriptions.push(i),this.add(i))}this.observables=null}},t.prototype.notifyNext=function(r,t,e,s,i){if(!this.hasFirst){this.hasFirst=!0;for(var a=0;a<this.subscriptions.length;a++)if(a!==e){var n=this.subscriptions[a];n.unsubscribe(),this.remove(n)}this.subscriptions=null}this.destination.next(t)},t}(OuterSubscriber_1.OuterSubscriber);exports.RaceSubscriber=RaceSubscriber;