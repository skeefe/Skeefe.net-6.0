"use strict";function bufferCount(t,r){return void 0===r&&(r=null),this.lift(new BufferCountOperator(t,r))}var __extends=this&&this.__extends||function(t,r){function e(){this.constructor=t}for(var u in r)r.hasOwnProperty(u)&&(t[u]=r[u]);t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)},Subscriber_1=require("../Subscriber");exports.bufferCount=bufferCount;var BufferCountOperator=function(){function t(t,r){this.bufferSize=t,this.startBufferEvery=r}return t.prototype.call=function(t,r){return r._subscribe(new BufferCountSubscriber(t,this.bufferSize,this.startBufferEvery))},t}(),BufferCountSubscriber=function(t){function r(r,e,u){t.call(this,r),this.bufferSize=e,this.startBufferEvery=u,this.buffers=[[]],this.count=0}return __extends(r,t),r.prototype._next=function(t){var r=this.count+=1,e=this.destination,u=this.bufferSize,n=null==this.startBufferEvery?u:this.startBufferEvery,i=this.buffers,f=i.length,s=-1;r%n===0&&i.push([]);for(var o=0;o<f;o++){var c=i[o];c.push(t),c.length===u&&(s=o,e.next(c))}s!==-1&&i.splice(s,1)},r.prototype._complete=function(){for(var r=this.destination,e=this.buffers;e.length>0;){var u=e.shift();u.length>0&&r.next(u)}t.prototype._complete.call(this)},r}(Subscriber_1.Subscriber);