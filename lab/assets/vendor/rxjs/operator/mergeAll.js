"use strict";function mergeAll(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),this.lift(new MergeAllOperator(e))}var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.mergeAll=mergeAll;var MergeAllOperator=function(){function e(e){this.concurrent=e}return e.prototype.call=function(e,t){return t._subscribe(new MergeAllSubscriber(e,this.concurrent))},e}();exports.MergeAllOperator=MergeAllOperator;var MergeAllSubscriber=function(e){function t(t,r){e.call(this,t),this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0}return __extends(t,e),t.prototype._next=function(e){this.active<this.concurrent?(this.active++,this.add(subscribeToResult_1.subscribeToResult(this,e))):this.buffer.push(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(OuterSubscriber_1.OuterSubscriber);exports.MergeAllSubscriber=MergeAllSubscriber;