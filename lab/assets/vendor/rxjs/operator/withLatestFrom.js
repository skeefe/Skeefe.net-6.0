"use strict";function withLatestFrom(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];var r;"function"==typeof t[t.length-1]&&(r=t.pop());var s=t;return this.lift(new WithLatestFromOperator(s,r))}var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.withLatestFrom=withLatestFrom;var WithLatestFromOperator=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e._subscribe(new WithLatestFromSubscriber(t,this.observables,this.project))},t}(),WithLatestFromSubscriber=function(t){function e(e,r,s){t.call(this,e),this.observables=r,this.project=s,this.toRespond=[];var o=r.length;this.values=new Array(o);for(var i=0;i<o;i++)this.toRespond.push(i);for(var i=0;i<o;i++){var n=r[i];this.add(subscribeToResult_1.subscribeToResult(this,n,n,i))}}return __extends(e,t),e.prototype.notifyNext=function(t,e,r,s,o){this.values[r]=e;var i=this.toRespond;if(i.length>0){var n=i.indexOf(r);n!==-1&&i.splice(n,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(OuterSubscriber_1.OuterSubscriber);