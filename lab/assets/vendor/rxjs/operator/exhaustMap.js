"use strict";function exhaustMap(t,e){return this.lift(new SwitchFirstMapOperator(t,e))}var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)},OuterSubscriber_1=require("../OuterSubscriber"),subscribeToResult_1=require("../util/subscribeToResult");exports.exhaustMap=exhaustMap;var SwitchFirstMapOperator=function(){function t(t,e){this.project=t,this.resultSelector=e}return t.prototype.call=function(t,e){return e._subscribe(new SwitchFirstMapSubscriber(t,this.project,this.resultSelector))},t}(),SwitchFirstMapSubscriber=function(t){function e(e,r,i){t.call(this,e),this.project=r,this.resultSelector=i,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}return __extends(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e=this.index++,r=this.destination;try{var i=this.project(t,e);this.hasSubscription=!0,this.add(subscribeToResult_1.subscribeToResult(this,i,t,e))}catch(t){r.error(t)}},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyNext=function(t,e,r,i,s){var o=this,n=o.resultSelector,c=o.destination;n?this.trySelectResult(t,e,r,i):c.next(e)},e.prototype.trySelectResult=function(t,e,r,i){var s=this,o=s.resultSelector,n=s.destination;try{var c=o(t,e,r,i);n.next(c)}catch(t){n.error(t)}},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(OuterSubscriber_1.OuterSubscriber);