"use strict";function dispatch(e){var r=this,t=e.source,c=e.subscriber,s=t,o=s.callbackFunc,a=s.args,u=s.scheduler,b=t.subject;if(!b){b=t.subject=new AsyncSubject_1.AsyncSubject;var i=function e(){for(var t=[],c=0;c<arguments.length;c++)t[c-0]=arguments[c];var s=e.source,o=s.selector,a=s.subject,b=t.shift();if(b)a.error(b);else if(o){var i=tryCatch_1.tryCatch(o).apply(this,t);i===errorObject_1.errorObject?r.add(u.schedule(dispatchError,0,{err:errorObject_1.errorObject.e,subject:a})):r.add(u.schedule(dispatchNext,0,{value:i,subject:a}))}else{var n=1===t.length?t[0]:t;r.add(u.schedule(dispatchNext,0,{value:n,subject:a}))}};i.source=t;var n=tryCatch_1.tryCatch(o).apply(this,a.concat(i));n===errorObject_1.errorObject&&b.error(errorObject_1.errorObject.e)}r.add(b.subscribe(c))}function dispatchNext(e){var r=e.value,t=e.subject;t.next(r),t.complete()}function dispatchError(e){var r=e.err,t=e.subject;t.error(r)}var __extends=this&&this.__extends||function(e,r){function t(){this.constructor=e}for(var c in r)r.hasOwnProperty(c)&&(e[c]=r[c]);e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)},Observable_1=require("../Observable"),tryCatch_1=require("../util/tryCatch"),errorObject_1=require("../util/errorObject"),AsyncSubject_1=require("../AsyncSubject"),BoundNodeCallbackObservable=function(e){function r(r,t,c,s){e.call(this),this.callbackFunc=r,this.selector=t,this.args=c,this.scheduler=s}return __extends(r,e),r.create=function(e,t,c){return void 0===t&&(t=void 0),function(){for(var s=[],o=0;o<arguments.length;o++)s[o-0]=arguments[o];return new r(e,t,s,c)}},r.prototype._subscribe=function(e){var r=this.callbackFunc,t=this.args,c=this.scheduler,s=this.subject;if(c)return c.schedule(dispatch,0,{source:this,subscriber:e});if(!s){s=this.subject=new AsyncSubject_1.AsyncSubject;var o=function e(){for(var r=[],t=0;t<arguments.length;t++)r[t-0]=arguments[t];var c=e.source,s=c.selector,o=c.subject,a=r.shift();if(a)o.error(a);else if(s){var u=tryCatch_1.tryCatch(s).apply(this,r);u===errorObject_1.errorObject?o.error(errorObject_1.errorObject.e):(o.next(u),o.complete())}else o.next(1===r.length?r[0]:r),o.complete()};o.source=this;var a=tryCatch_1.tryCatch(r).apply(this,t.concat(o));a===errorObject_1.errorObject&&s.error(errorObject_1.errorObject.e)}return s.subscribe(e)},r}(Observable_1.Observable);exports.BoundNodeCallbackObservable=BoundNodeCallbackObservable;