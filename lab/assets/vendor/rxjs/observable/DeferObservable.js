"use strict";var __extends=this&&this.__extends||function(e,r){function t(){this.constructor=e}for(var s in r)r.hasOwnProperty(s)&&(e[s]=r[s]);e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)},Observable_1=require("../Observable"),subscribeToResult_1=require("../util/subscribeToResult"),OuterSubscriber_1=require("../OuterSubscriber"),DeferObservable=function(e){function r(r){e.call(this),this.observableFactory=r}return __extends(r,e),r.create=function(e){return new r(e)},r.prototype._subscribe=function(e){return new DeferSubscriber(e,this.observableFactory)},r}(Observable_1.Observable);exports.DeferObservable=DeferObservable;var DeferSubscriber=function(e){function r(r,t){e.call(this,r),this.factory=t,this.tryDefer()}return __extends(r,e),r.prototype.tryDefer=function(){try{this._callFactory()}catch(e){this._error(e)}},r.prototype._callFactory=function(){var e=this.factory();e&&this.add(subscribeToResult_1.subscribeToResult(this,e))},r}(OuterSubscriber_1.OuterSubscriber);