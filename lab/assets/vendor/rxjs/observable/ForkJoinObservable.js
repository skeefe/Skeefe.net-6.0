"use strict";var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},Observable_1=require("../Observable"),EmptyObservable_1=require("./EmptyObservable"),isArray_1=require("../util/isArray"),subscribeToResult_1=require("../util/subscribeToResult"),OuterSubscriber_1=require("../OuterSubscriber"),ForkJoinObservable=function(e){function t(t,r){e.call(this),this.sources=t,this.resultSelector=r}return __extends(t,e),t.create=function(){for(var e=[],r=0;r<arguments.length;r++)e[r-0]=arguments[r];if(null===e||0===arguments.length)return new EmptyObservable_1.EmptyObservable;var s=null;return"function"==typeof e[e.length-1]&&(s=e.pop()),1===e.length&&isArray_1.isArray(e[0])&&(e=e[0]),0===e.length?new EmptyObservable_1.EmptyObservable:new t(e,s)},t.prototype._subscribe=function(e){return new ForkJoinSubscriber(e,this.sources,this.resultSelector)},t}(Observable_1.Observable);exports.ForkJoinObservable=ForkJoinObservable;var ForkJoinSubscriber=function(e){function t(t,r,s){e.call(this,t),this.sources=r,this.resultSelector=s,this.completed=0,this.haveValues=0;var i=r.length;this.total=i,this.values=new Array(i);for(var u=0;u<i;u++){var o=r[u],l=subscribeToResult_1.subscribeToResult(this,o,null,u);l&&(l.outerIndex=u,this.add(l))}}return __extends(t,e),t.prototype.notifyNext=function(e,t,r,s,i){this.values[r]=t,i._hasValue||(i._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(e){var t=this.destination,r=this,s=r.haveValues,i=r.resultSelector,u=r.values,o=u.length;if(!e._hasValue)return void t.complete();if(this.completed++,this.completed===o){if(s===o){var l=i?i.apply(this,u):u;t.next(l)}t.complete()}},t}(OuterSubscriber_1.OuterSubscriber);